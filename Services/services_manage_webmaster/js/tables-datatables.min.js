$(document).ready(function() {
    var table =  $('#table-1').DataTable({
        language: {
            searchPlaceholder: 'Search records',
            sSearch: '',
            sLengthMenu: 'Show _MENU_',
            sLength: 'dataTables_length',
            oPaginate: {
                sFirst: '<i class="material-icons">Previous</i>',
                sPrevious: '<i class="material-icons">Previous</i>',
                sNext: '<i class="material-icons">Next</i>',
                sLast: '<i class="material-icons">Next</i>' 
            }
        }
    });
    //Filters for country Satate , city and category_name in products
    $('#select-country').on('change', function () {
        table.columns(2).search( this.value ).draw();
    } );
    $('#select-state').on('change', function () {
        table.columns(3).search( this.value ).draw();
    } );
    $('#select-cities').on('change', function () {
        table.columns(4).search( this.value ).draw();
    } );
    $('#select-category').on('change', function () {
        table.columns(2).search( this.value ).draw();
    } );
    $('#select-order').on('change', function () {
        table.columns(5).search( this.value ).draw();
    } );
    $('#select-specilization').on('change', function () {
        table.columns(5).search( this.value ).draw();
    } );
    $('#select-specilization1').on('change', function () {
        table.columns(4).search( this.value ).draw();
    } );
    $('#select-location1').on('change', function () {
        table.columns(5).search( this.value ).draw();
    } );
    $('#select-email').on('change', function () {
        table.columns(4).search( this.value ).draw();
    } );
    $('.dataTables_length select').addClass('browser-default');

    //Date picker for filters
    $("#datepicker_from").datepicker({
      showOn: "button",
      buttonImage: "images/calendar.gif",
      buttonImageOnly: false,
      "onSelect": function(date) {
        minDateFilter = new Date(date).getTime();
        table.draw();
      }
    }).keyup(function() {
      minDateFilter = new Date(this.value).getTime();
      table.draw();
    });

    $("#datepicker_to").datepicker({
      showOn: "button",
      buttonImage: "images/calendar.gif",
      buttonImageOnly: false,
      "onSelect": function(date) {
        maxDateFilter = new Date(date).getTime();
        table.draw();
      }
    }).keyup(function() {
      maxDateFilter = new Date(this.value).getTime();
      table.draw();
    });
    // Date range filter
      minDateFilter = "";
      maxDateFilter = "";

      $.fn.dataTableExt.afnFiltering.push(
        function(oSettings, aData, iDataIndex) {
          if (typeof aData._date == 'undefined') {
            aData._date = new Date(aData[5]).getTime();
          }

          if (minDateFilter && !isNaN(minDateFilter)) {
            if (aData._date < minDateFilter) {
              return false;
            }
          }

          if (maxDateFilter && !isNaN(maxDateFilter)) {
            if (aData._date > maxDateFilter) {
              return false;
            }
          }

          return true;
        }
      );
});


//Filters for Active and inactive checkbox
$(function() {
  otable = $('#table-1').dataTable();
})
function filterme() {
  //build a regex filter string with an or(|) condition
  var types = $('input:checkbox[name="type"]:checked').map(function() {
    return '^' + this.value + '\$';
  }).get().join('|');
  //filter in column 0, with an regex, no smart filtering, no inputbox,not case sensitive
  otable.fnFilter(types, 4, true, false, false, false);  
}